![](https://user-gold-cdn.xitu.io/2020/4/23/171a6cd011ed65b8?w=900&h=383&f=png&s=214833)

> æ ‘é…±å¸Œæœ›å°†å‰ç«¯çš„ä¹è¶£å¸¦ç»™å¤§å®¶
> æœ¬æ–‡å·²æ”¶å½• <a href="https://github.com/littleTreeme/frontendThings " style="word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8; border: none; text-decoration: none; color: #dda52d;">https://github.com/littleTreeme/frontendThings</a> å–œæ¬¢å°±starâœ¨

> ä¸Šä¸€ç¯‡æ ‘é…±è®²ã€Šå‰ç«¯å·¥ç¨‹åŒ–é‚£äº›äº‹ã€‹ï¼ŒèŠåˆ°è„šæ‰‹æ¶ï¼Œä¸è¿‡æ—¶é—´æ¯”è¾ƒä»“ä¿ƒï¼Œå¯¼è‡´å†…å®¹è¾ƒå°‘ï¼Œè€Œåœ¨æˆ‘å®è·µå¼€å‘ä¸­ï¼Œéšç€æ–°é¡¹ç›®æ„ˆæ¥æ„ˆå¤šï¼Œè„šæ‰‹æ¶å·¥å…·å°±èµ·åˆ°æé«˜æ•ˆèƒ½çš„ä½œç”¨ï¼Œå€Ÿæ­¤æœºä¼šè·Ÿå°ä¼™ä¼´ä»¬åˆ†äº«ä¸‹æˆ‘æ˜¯å¦‚ä½•ä»0åˆ°1å¼€å‘ä¸€ä¸ªç®€å•è„šæ‰‹æ¶

### 1.ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶
> è„šæ‰‹æ¶ç”¨äºå¿«é€Ÿç”Ÿæˆæ–°é¡¹ç›®çš„ç›®å½•æ¨¡æ¿ï¼Œå¹¶é›†æˆä¸€ç³»åˆ—ä½“ç³»åŒ–å·¥å…·çš„å®‰è£…ï¼Œèƒ½å¤Ÿæå‡å‰ç«¯å¼€å‘äººå‘˜çš„æ•ˆç‡ï¼Œå‡å°‘copyæ“ä½œ

ç›®å‰æ¯”è¾ƒä¸»æµçš„è„šæ‰‹æ¶ï¼š

- Vueè„šæ‰‹æ¶ï¼šVue-cli
- Reactè„šæ‰‹æ¶ï¼šcreate-react-app
- Yeoman

### 2.æˆ‘æœŸæœ›çš„è„šæ‰‹æ¶

> è€Œæˆ‘æ‰€æœŸæœ›çš„è„šæ‰‹æ¶æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

å½“æˆ‘è¦å¼€å¯ä¸€ä¸ªæ–°é¡¹ç›®çš„å¼€å‘ï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆæ–°é¡¹ç›®çš„ç›®å½•æ¨¡æ¿ï¼Œè€Œè¿™ä¸ªç›®å½•ç»“æ„æ˜¯æ¯ä¸ªé¡¹ç›®ç»Ÿä¸€ä¸ªæ¨¡ç‰ˆè§„èŒƒï¼ˆç›®å½•è§„èŒƒï¼‰ï¼ŒåŒæ—¶ä¹Ÿè®¾å®šäº†é€šç”¨çš„é…ç½®åŒ…æ‹¬å¦‚ä¸‹

- é€šç”¨çš„Webpacké…ç½®ï¼ˆvue cli 3x ä»¥ä¸Šæ˜¯vue.config.jsï¼‰
- ç»Ÿä¸€çš„Eslint æ ¡éªŒè§„åˆ™ï¼šå¦‚Airbnbã€eslint-plugin-vueç­‰ï¼ˆeslintConfigï¼‰
- ç»Ÿä¸€çš„å•å…ƒæµ‹è¯•æ¡†æ¶é…ç½®ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡ã€æµ‹è¯•çš„ç›®å½•ç­‰
- ç»Ÿä¸€çš„Dockerfileå’Œjenkinsfile (ç”¨æ¥æ‰“åŒ…æˆé•œåƒå’Œéƒ¨ç½²æµæ°´çº¿å®šä¹‰)
- ç»Ÿä¸€babelçš„é…ç½®ï¼ˆ.babelrcæˆ–babel.config.jsï¼‰
- ç»Ÿä¸€çš„å¸¸é‡é…ç½®ï¼ˆç¼“å­˜å­—æ®µç­‰ç­‰ï¼‰
- ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼ˆdevelopmentã€testã€productionï¼‰

> æ²¡æœ‰è„šæ‰‹æ¶ï¼Œæˆ‘åªèƒ½é€šè¿‡copyæ‹·è´ä»£ç æ¥å®Œæˆï¼Œè¿™æ ·ç¹çåˆæœºæ¢°åŒ–çš„æ“ä½œæµªè´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”è¿˜å¯èƒ½åœ¨æ‹·è´è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæŸä¸ªç»†èŠ‚å‡ºé”™ï¼Œå¯¼è‡´é¡¹ç›®å‡ºé”™ï¼Œæ’æŸ¥é—®é¢˜åˆè€—æ—¶ã€‚æˆ–è®¸ä½ å¯èƒ½ä¼šæƒ³ï¼Œæˆ‘ä»¬ä¸æ˜¯å¯ä»¥ç”¨vueæˆ–è€…reactå®˜æ–¹çš„è„šæ‰‹æ¶æ¥ç”Ÿæˆæ¨¡ç‰ˆå—ï¼Ÿæ˜¯ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼åˆ›å»ºçš„æ¨¡ç‰ˆä¸ä¸€å®šç¬¦åˆä½ å†…éƒ¨ç»“æ„åŒ–æ ‡å‡†

ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè„šæ‰‹æ¶å°±èµ·åˆ°ä¸€ä¸ªè‡³å…³é‡è¦çš„è§’è‰²ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è„šæ‰‹æ¶æ¥çº¦æŸå¥½è§„èŒƒï¼Œç»Ÿä¸€çš„é…ç½®ï¼Œæ¥æ‰“é€šæ–°é¡¹ç›®çš„å¼€å‘å·¥å…·é“¾ï¼Œä¸€æ–¹é¢æå‡å¼€å‘æ•ˆç‡ï¼Œä¸€æ–¹é¢åˆ™æé«˜é¡¹ç›®å¯¹æ¥å¯ç»´æŠ¤æ€§åŠæ–°å‘˜å·¥ç†Ÿæ‚‰é¡¹ç›®ç®€æ˜“æ€§ã€‚

### 3.å¼€å‘è„šæ‰‹æ¶

#### 3.1 å¦‚ä½•å¼€å‘
> å¦‚æœæ˜¯è¦å¼€å‘ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶åŒ–çš„è„šæ‰‹æ¶ï¼Œéœ€è¦è€ƒè™‘çš„å› ç´ å¾ˆå¤šï¼Œå› ä¸ºæŸç§é™åˆ¶ï¼Œé€‰æ‹©äº†ä¸€ç§ç®€æ˜“çš„æ–¹å¼æ¥å®ç°å†…éƒ¨çš„è„šæ‰‹æ¶å·¥å…·ï¼Œè¿œç¦»å°±æ˜¯é€šè¿‡å‡†å¤‡ä¸¤ä¸ªæ¨¡ç‰ˆï¼Œä¸€ä¸ªæ˜¯pcç«¯çš„ï¼Œå¦ä¸€ä¸ªæ˜¯mobileç«¯çš„æ¨¡ç‰ˆï¼Œç„¶åç”¨gitç®¡ç†èµ·æ¥ï¼Œæˆ‘éœ€è¦å¦‚ä¸‹å·¥å…·ï¼š

- å¯ç”¨äºæ§åˆ¶å°é€‰æ‹©çš„å·¥å…·ï¼šinquirer
- å¯å¤„ç†æ§åˆ¶å°å‘½ä»¤çš„å·¥å…·ï¼šcommander
- å¯æ”¹å˜è¾“å‡ºlogé¢œè‰²çš„å·¥å…·ï¼šchalk
- å¯æ‰§è¡Œshellå‘½ä»¤çš„å·¥å…·: child_process


![](https://user-gold-cdn.xitu.io/2020/4/25/171b0b695fd81a9e?w=1776&h=422&f=png&s=69630)

å…¥å£æ–‡ä»¶ index.js
```
#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const chalk = require('chalk');
const commander = require('commander');
const inquirer = require('inquirer');
const checkDire = require('./utils/checkDire.js');
const { exec } = require('child_process');
const { version } = require('../package.json');
const { promptTypeList } = require('./config');

//version ç‰ˆæœ¬å·
commander.version(version, '-v, --version')
  .command('init <projectName>')
  .alias("i")
  .description("è¾“å…¥é¡¹ç›®åç§°ï¼Œåˆå§‹åŒ–é¡¹ç›®æ¨¡ç‰ˆ")
  .action(async (projectName,cmd) => {
    await checkDire(path.join(process.cwd(),projectName),projectName);   // æ£€æµ‹åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
    inquirer.prompt(promptTypeList).then(result => {
      const {url, gitName, val} = result.type;
      console.log("æ‚¨é€‰æ‹©çš„æ¨¡ç‰ˆç±»å‹ä¿¡æ¯å¦‚ä¸‹ï¼š" + val);
      console.log('é¡¹ç›®åˆå§‹åŒ–æ‹·è´è·å–ä¸­...');
      if(!url){
        console.log(chalk.red(`${val} è¯¥ç±»å‹æš‚ä¸æ”¯æŒ...`));
        process.exit(1);
      }
      exec('git clone ' + url, function (error, stdout, stderr) {
        if (error !== null) {
          console.log(chalk.red(
            `clone fail,${error}`
          ));
          return;
        }
        fs.rename(gitName, projectName, (err)=>{
          if (err) {
            exec('rm -rf '+gitName, function (err, out) {});
            console.log(chalk.red(`The ${projectName} project template already exist`));
          } else {
            console.log(chalk.green(`The ${projectName} project template successfully create(é¡¹ç›®æ¨¡ç‰ˆåˆ›å»ºæˆåŠŸ)`));
          }
        });
      });
    })
  });
commander.parse(process.argv);

```
è¿™é‡Œå®šä¹‰çš„æ˜¯npmåŒ…å‘½ä»¤binçš„å…¥å£æ–‡ä»¶

![](https://user-gold-cdn.xitu.io/2020/4/25/171b09c3ccf71896?w=1454&h=348&f=png&s=39738)

éœ€è¦æ³¨æ„åœ¨æ–‡ä»¶å‰é¢å®šä¹‰```#!/usr/bin/env node```
> #!/usr/bin/env nodeè®¾ç½®åï¼Œå¯ä»¥è®©ç³»ç»ŸåŠ¨æ€çš„å»æŸ¥æ‰¾nodeï¼Œå·²è§£å†³ä¸åŒæœºå™¨ä¸åŒç”¨æˆ·è®¾ç½®ä¸ä¸€è‡´é—®é¢˜

æ£€æµ‹ç›®å½•æ˜¯å¦å­˜åœ¨
```
// utils/checkDire.js
const fs = require('fs');
const chalk = require('chalk');
const path = require('path');

module.exports = function (dir,name) {
  let isExists = fs.existsSync(dir);
  if (isExists) {
    console.log(chalk.red(
      `The ${name} project already exists in  directory. Please try to use another projectName`
    ));
    process.exit(1);
  }
```
é…ç½®æ–‡ä»¶
```
// config/index.js
é…ç½®æ–‡ä»¶
/*
  @dest: ä½¿ç”¨é…ç½®æ–‡ä»¶
  @Author: tree
 */
module.exports  = {
  promptTypeList:[{
      type: 'list',
      message: 'è¯·é€‰æ‹©æ‹‰å–çš„æ¨¡ç‰ˆç±»å‹:',
      name: 'type',
      choices: [{
        name: 'mobile',
        value: {
          url: '',
          gitName: 'vue-web-template',
          val:'ç§»åŠ¨ç«¯æ¨¡ç‰ˆ'
        }
      },{
        name: 'pc',
        value: {
          url: 'https://github.com/littleTreeme/vue-web-template.git',
          gitName: 'vue-web-template',
          val:'PCç«¯æ¨¡ç‰ˆ'
        }
      }]
  }],
};
```



> æºç é“¾æ¥ï¼š[https://github.com/littleTreeme/kdv-cli](https://github.com/littleTreeme/kdv-cli)  å¦‚æœä½ è§‰å¾—å®ç”¨è¯·ç»™ä¸ªğŸŒŸæ”¯æŒ,åœ¨æ­¤æ„Ÿè°¢

#### 3.2 å·¥å…·è¯¦è§£

- inquirer
> ä¸€ä¸ªç”¨æˆ·ä¸å‘½ä»¤è¡Œäº¤äº’çš„å·¥å…·

åŸºæœ¬ç”¨æ³•  [ğŸ”—ä½¿ç”¨æ–‡æ¡£](https://github.com/SBoudrias/Inquirer.js)
```
const inquirer = require('inquirer');

const promptList = [
     type: 'list',
     message: 'è¯·é€‰æ‹©æ‹‰å–çš„æ¨¡ç‰ˆç±»å‹:',
     name: 'type',
      choices: ['mobile','pc']
];

inquirer.prompt(promptList).then(type => {
    console.log(type); // è¿”å› mobile æˆ– pc
})
```
åœºæ™¯å¦‚ä¸‹

![](https://user-gold-cdn.xitu.io/2020/4/25/171b077e989af14b?w=1132&h=118&f=png&s=20280)
- commander
> commanderæ˜¯ä¸€ä¸ªè½»å·§çš„nodejsæ¨¡å—ï¼Œæä¾›äº†ç”¨æˆ·å‘½ä»¤è¡Œè¾“å…¥å’Œå‚æ•°è§£æå¼ºå¤§åŠŸèƒ½


ä½¿ç”¨åˆ°çš„commander API [ğŸ”—ä½¿ç”¨æ–‡æ¡£](https://github.com/tj/commander.js)

```
const commander = require('commander');
commander.version(version, '-v, --version')
  .command('init <projectName>') 
  .alias("i") 
  .description("è¾“å…¥é¡¹ç›®åç§°ï¼Œåˆå§‹åŒ–é¡¹ç›®æ¨¡ç‰ˆ") 
  .action(async (projectName,cmd) => {
      console.log(projectName,'ä½ è¾“å…¥çš„<projectName>')
  })
commander.parse(process.argv);
  
// command â€“ å®šä¹‰å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œåé¢å¯è·Ÿä¸Šä¸€ä¸ªnameï¼Œç”¨ç©ºæ ¼éš”å¼€
// alias â€“ å®šä¹‰ä¸€ä¸ªæ›´çŸ­çš„å‘½ä»¤è¡ŒæŒ‡ä»¤
// description â€“ æè¿°ï¼Œå®ƒä¼šåœ¨helpé‡Œé¢å±•ç¤º
// option â€“ å®šä¹‰å‚æ•°
// action â€“ æ³¨å†Œä¸€ä¸ªcallbackå‡½æ•°
// parse - è§£æå‘½ä»¤è¡Œ
 
```

- chalk
> nodeç»ˆç«¯æ ·å¼åº“,è®©ä½ çš„æ—¥å¿—æ ·å¼æ›´ç¾è§‚ï¼Œä¸»è¦ç”¨chalkæ¥åŒºåˆ«é”™è¯¯ä¸æˆåŠŸçš„æ—¥å¿—

å¦‚ä½•ä½¿ç”¨ [ğŸ”—ä½¿ç”¨æ–‡æ¡£](https://github.com/chalk/chalk)
```
const chalk = require('chalk');

// æŠ¥é”™æ—¥å¿—ç”¨çº¢è‰²æ¥æ˜¾ç¤º
chalk.red(`The project already exists in  directory. Please try to use another projectName`));

// æˆåŠŸæ—¥å¿—ç”¨ç»¿è‰²æ¥æ˜¾ç¤º
chalk.green(`The project template successfully create(é¡¹ç›®æ¨¡ç‰ˆåˆ›å»ºæˆåŠŸ)`);
```


#### 3.3 å¦‚ä½•ä½¿ç”¨

å¯ä»¥å…ˆé€šè¿‡è¯•ç€æœ¬åœ°å®‰è£…å°è¯•æµç¨‹[é˜…è¯»ä½¿ç”¨æ–‡æ¡£](https://github.com/littleTreeme/kdv-cli)
![](https://user-gold-cdn.xitu.io/2020/4/25/171b063787098e90?w=1976&h=1142&f=png&s=101677)

å¦‚ä¸‹æ‰€ç¤ºæ˜¯è‡ªå·±å¼€å‘çš„ä¸€ä¸ªkdv-cliè¿è¡Œæ—¶çš„ç¤ºæ„å›¾

![](https://user-gold-cdn.xitu.io/2020/4/25/171b05d8b6c3cd70?w=1132&h=118&f=png&s=20280)

é‚£ä¹ˆ kdv-cli å‘½ä»¤æ˜¯æ€æ ·æ˜ å°„è¿›å»çš„ï¼Ÿï¼ŒåŸå› åœ¨äº package.json é‡Œé¢çš„ å®šä¹‰äº† bin å­—æ®µï¼›

```
// package.json
"bin": {
    "kdv-cli": "./bin/index.js"
 },
```


æˆ‘é€‰æ‹©pcç±»å‹ï¼Œç„¶ååˆ›å»ºåä¸º testçš„é¡¹ç›®(æš‚è¿˜ä¸æ”¯æŒmobile)

![](https://user-gold-cdn.xitu.io/2020/4/25/171b05c5400eeeba?w=1190&h=142&f=png&s=57064)

é‡å¤åˆ›å»ºåˆ™æŠ¥é”™

![](https://user-gold-cdn.xitu.io/2020/4/25/171b05cf4c9255b2?w=1144&h=86&f=png&s=16593)

æ‹‰å–åçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://user-gold-cdn.xitu.io/2020/4/24/171acde1ecb38717?w=1096&h=324&f=png&s=159132)

### 4.æ³¨æ„äº‹é¡¹

- æ³¨æ„äº‹é¡¹
> å½“ä½ å®Œæˆè„šæ‰‹æ¶å¼€å‘æ—¶ï¼Œä½ æƒ³æœ¬åœ°æµ‹è¯•æ˜¯å¦æˆåŠŸè¿ä½œï¼Œä¼šå‡ºç°è¿™ç§æƒ…å†µ


![](https://user-gold-cdn.xitu.io/2020/4/26/171b483b07718a67?w=1412&h=74&f=png&s=13097)

è¿™æ˜¯å› ä¸ºä½ æœ¬åœ°æ‰¾ä¸åˆ°å‘½ä»¤æ‰§è¡Œçš„è·¯å¾„ï¼Œæ²¡æœ‰æ˜ å°„åˆ°binä¸­å»ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨æœ¬åœ°æµ‹è¯•åˆšå¼€å‘ç©çš„è„šæ‰‹æ¶å·¥å…·å‘½ä»¤ï¼Œé‚£å°±æ˜¯ç”¨```npm link ```,å¦‚ä¸‹æ‰€ç¤ºå³å¯


![](https://user-gold-cdn.xitu.io/2020/4/26/171b485e0f5dcc30?w=1418&h=186&f=png&s=34913)

### 5.ç»“å°¾

> é€šè¿‡ä¸Šæ–‡æ‰€è¿°ï¼Œæˆ‘ä»¬å°±ä»0åˆ°1å®Œæˆkdv-cliè„šæ‰‹æ¶å¼€å‘
> ï¼Œè¯¥å·¥å…·æˆ–è®¸ä¸å¤ªé€‚ç”¨äºæ¯ä¸ªåœºæ™¯ï¼Œä½†å¯ä»¥æ¢³ç†ä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶çš„æ­å»ºè¿‡ç¨‹ï¼Œä¸ºåæœŸåšæ›´å…¨é¢ã€åŠŸèƒ½æ›´å¼ºå¤§çš„è„šæ‰‹æ¶å¥ å®šåŸºç¡€ï¼Œå¦‚æœä½ å–œæ¬¢ï¼Œè¯·ç»™æ ‘é…±ç‚¹ä¸ªâœ¨ [https://github.com/littleTreeme/kdv-cli](https://github.com/littleTreeme/kdv-cli) 
